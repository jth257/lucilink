<Window x:Class="LuciLink.Client.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LuciLink.Client"
        xmlns:rendering="clr-namespace:LuciLink.Client.Rendering"
        mc:Ignorable="d"
        Title="{Binding WindowTitle}" Height="900" Width="460"
        MinWidth="400" MinHeight="600"
        Background="Transparent" WindowStartupLocation="CenterScreen"
        WindowStyle="None" AllowsTransparency="True"
        ResizeMode="CanResizeWithGrip">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="40" ResizeBorderThickness="6"
                      GlassFrameThickness="0" CornerRadius="12"/>
    </WindowChrome.WindowChrome>

    <Window.Resources>
        <!-- ===== ìƒ‰ìƒ íŒ”ë ˆíŠ¸ (Premium Indigo Theme) ===== -->
        <Color x:Key="AccentColor">#3F51B5</Color>
        <Color x:Key="AccentDarkColor">#303F9F</Color>
        <Color x:Key="AccentLightColor">#C5CAE9</Color>
        <Color x:Key="AccentHoverColor">#5C6BC0</Color>
        <Color x:Key="SurfaceColor">#F5F5F7</Color>
        <Color x:Key="SurfaceLightColor">#FFFFFF</Color>
        <Color x:Key="BorderColor">#E8E8ED</Color>
        <Color x:Key="TextPrimaryColor">#1D1D1F</Color>
        <Color x:Key="TextSecondaryColor">#86868B</Color>
        <Color x:Key="SuccessColor">#34C759</Color>
        <Color x:Key="DangerColor">#FF3B30</Color>
        <Color x:Key="WarningColor">#FF9500</Color>

        <SolidColorBrush x:Key="AccentBrush" Color="{StaticResource AccentColor}"/>
        <SolidColorBrush x:Key="AccentDarkBrush" Color="{StaticResource AccentDarkColor}"/>
        <SolidColorBrush x:Key="AccentLightBrush" Color="{StaticResource AccentLightColor}"/>
        <SolidColorBrush x:Key="AccentHoverBrush" Color="{StaticResource AccentHoverColor}"/>
        <SolidColorBrush x:Key="SurfaceBrush" Color="{StaticResource SurfaceColor}"/>
        <SolidColorBrush x:Key="SurfaceLightBrush" Color="{StaticResource SurfaceLightColor}"/>
        <SolidColorBrush x:Key="BorderBrush" Color="{StaticResource BorderColor}"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="{StaticResource TextPrimaryColor}"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="{StaticResource TextSecondaryColor}"/>
        <SolidColorBrush x:Key="SuccessBrush" Color="{StaticResource SuccessColor}"/>
        <SolidColorBrush x:Key="DangerBrush" Color="{StaticResource DangerColor}"/>

        <!-- ===== ê·¸ë¦¼ìž íš¨ê³¼ ===== -->
        <DropShadowEffect x:Key="Shadow1" BlurRadius="8" ShadowDepth="2" Opacity="0.08" Direction="270"/>
        <DropShadowEffect x:Key="Shadow2" BlurRadius="16" ShadowDepth="4" Opacity="0.12" Direction="270"/>
        <DropShadowEffect x:Key="Shadow3" BlurRadius="24" ShadowDepth="6" Opacity="0.16" Direction="270"/>

        <!-- ===== íƒ€ì´í‹€ë°” ë²„íŠ¼ ìŠ¤íƒ€ì¼ ===== -->
        <Style x:Key="CaptionButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="#86868B"/>
            <Setter Property="Width" Value="46"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" Background="{TemplateBinding Background}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="#0A000000"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CloseButtonStyle" TargetType="Button" BasedOn="{StaticResource CaptionButtonStyle}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" Background="Transparent">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="#E81123"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===== ìž…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼ ===== -->
        <Style x:Key="InputFieldStyle" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource SurfaceLightBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="Padding" Value="14,12"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontFamily" Value="Segoe UI Variable, Segoe UI, sans-serif"/>
            <Setter Property="CaretBrush" Value="{StaticResource AccentBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="bd" Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10" Padding="{TemplateBinding Padding}">
                            <ScrollViewer x:Name="PART_ContentHost" Focusable="false"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="bd" Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
                                <Setter TargetName="bd" Property="BorderThickness" Value="2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PasswordFieldStyle" TargetType="PasswordBox">
            <Setter Property="Background" Value="{StaticResource SurfaceLightBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="Padding" Value="14,12"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="FontFamily" Value="Segoe UI Variable, Segoe UI, sans-serif"/>
            <Setter Property="CaretBrush" Value="{StaticResource AccentBrush}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="PasswordBox">
                        <Border x:Name="bd" Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10" Padding="{TemplateBinding Padding}">
                            <ScrollViewer x:Name="PART_ContentHost" Focusable="false"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="bd" Property="BorderBrush" Value="{StaticResource AccentBrush}"/>
                                <Setter TargetName="bd" Property="BorderThickness" Value="2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===== ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ===== -->
        <Style x:Key="NavButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="44"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" Background="Transparent" CornerRadius="12" Padding="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="#08000000"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="#14000000"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===== íˆ´ë°” ë²„íŠ¼ ìŠ¤íƒ€ì¼ ===== -->
        <Style x:Key="ToolButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource SurfaceLightBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondaryBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="FontFamily" Value="Segoe UI Variable, Segoe UI, sans-serif"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Padding" Value="16,6"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                CornerRadius="8" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="#08000000"/>
                                <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="{StaticResource AccentBrush}"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===== ë©”ì¸ ì—°ê²° ë²„íŠ¼ ìŠ¤íƒ€ì¼ ===== -->
        <Style x:Key="ConnectButtonStyle" TargetType="Button">
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontFamily" Value="Segoe UI Variable, Segoe UI, sans-serif"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="32,8"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" CornerRadius="10" Padding="{TemplateBinding Padding}"
                                Background="{StaticResource AccentBrush}" BorderThickness="0">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="12" ShadowDepth="3" Opacity="0.25" 
                                                  Color="{StaticResource AccentColor}" Direction="270"/>
                            </Border.Effect>
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="{StaticResource AccentHoverBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="{StaticResource AccentDarkBrush}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="bd" Property="Background" Value="#E0E0E5"/>
                                <Setter TargetName="bd" Property="Effect" Value="{x:Null}"/>
                                <Setter Property="Foreground" Value="#AEAEB2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===== ë§í¬ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ===== -->
        <Style x:Key="LinkButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Foreground" Value="{StaticResource AccentBrush}"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontFamily" Value="Segoe UI Variable, Segoe UI, sans-serif"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <TextBlock x:Name="tb" Text="{TemplateBinding Content}" 
                                   Foreground="{TemplateBinding Foreground}" FontSize="{TemplateBinding FontSize}"
                                   HorizontalAlignment="Center" FontWeight="Medium"/>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="tb" Property="TextDecorations" Value="Underline"/>
                                <Setter TargetName="tb" Property="Foreground" Value="{StaticResource AccentHoverBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ===== ì–¸ì–´ ì „í™˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ ===== -->
        <Style x:Key="LangButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#44FFFFFF"/>
            <Setter Property="Foreground" Value="#CCFFFFFF"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="FontFamily" Value="Segoe UI Variable, Segoe UI, sans-serif"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="WindowChrome.IsHitTestVisibleInChrome" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="bd" Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}" 
                                CornerRadius="6" Padding="8,3">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="bd" Property="Background" Value="#22FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- ===== ë£¨íŠ¸: ë‘¥ê·¼ ëª¨ì„œë¦¬ í´ë¦¬í•‘ ===== -->
    <Border CornerRadius="12" Background="#303F9F">
        <Border.Clip>
            <RectangleGeometry RadiusX="12" RadiusY="12">
                <RectangleGeometry.Rect>
                    <MultiBinding Converter="{x:Static local:RectConverter.Instance}">
                        <Binding Path="ActualWidth" RelativeSource="{RelativeSource AncestorType=Border}"/>
                        <Binding Path="ActualHeight" RelativeSource="{RelativeSource AncestorType=Border}"/>
                    </MultiBinding>
                </RectangleGeometry.Rect>
            </RectangleGeometry>
        </Border.Clip>

        <Grid>
            <!-- ===== ë©”ì¸ í™”ë©´ (ë¡œê·¸ì¸ í›„) ===== -->
            <Grid x:Name="MainPanel" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="40"/>  <!-- ì»¤ìŠ¤í…€ íƒ€ì´í‹€ë°” -->
                    <RowDefinition Height="Auto"/> <!-- ìƒë‹¨ ìƒíƒœë°” -->
                    <RowDefinition Height="*"/>    <!-- ë¹„ë””ì˜¤ -->
                    <RowDefinition Height="Auto"/> <!-- ë„¤ë¹„ë°” -->
                    <RowDefinition Height="Auto"/> <!-- íˆ´ë°” -->
                </Grid.RowDefinitions>

                <!-- ===== ì»¤ìŠ¤í…€ íƒ€ì´í‹€ë°” ===== -->
                <Border Grid.Row="0" Background="White" BorderBrush="{StaticResource BorderBrush}" 
                        BorderThickness="0,0,0,1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- ì•± ì•„ì´ì½˜ + ì´ë¦„ -->
                        <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="14,0,0,0">
                            <Ellipse Width="8" Height="8" Fill="{StaticResource AccentBrush}" Margin="0,0,8,0"/>
                            <TextBlock Text="{DynamicResource App.Name}" FontSize="13" FontWeight="SemiBold" 
                                       Foreground="{StaticResource TextPrimaryBrush}" VerticalAlignment="Center"
                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                        </StackPanel>

                        <!-- ì–¸ì–´ ì „í™˜ + ìœˆë„ìš° ì»¨íŠ¸ë¡¤ -->
                        <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                            <Button Content="{DynamicResource Lang.Switch}" Command="{Binding ToggleLanguageCommand}" 
                                    Background="Transparent" BorderBrush="{StaticResource BorderBrush}" 
                                    BorderThickness="1" Foreground="{StaticResource TextSecondaryBrush}"
                                    FontSize="10" FontFamily="Segoe UI Variable, Segoe UI, sans-serif" 
                                    FontWeight="Medium" Cursor="Hand" Padding="8,3" Margin="0,0,4,0"
                                    WindowChrome.IsHitTestVisibleInChrome="True">
                                <Button.Template>
                                    <ControlTemplate TargetType="Button">
                                        <Border x:Name="bd" Background="Transparent" 
                                                BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" 
                                                CornerRadius="6" Padding="8,3">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="bd" Property="Background" Value="#08000000"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Button.Template>
                            </Button>
                            <Button Content="â”€" Style="{StaticResource CaptionButtonStyle}" Click="OnMinimize"/>
                            <Button Content="â–¡" Style="{StaticResource CaptionButtonStyle}" Click="OnMaximize"/>
                            <Button Content="âœ•" Style="{StaticResource CloseButtonStyle}" Click="OnClose"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- ===== ìƒë‹¨ ìƒíƒœë°” ===== -->
                <Border Grid.Row="1" Background="White" Padding="16,10">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="6" ShadowDepth="1" Opacity="0.04" Direction="270"/>
                    </Border.Effect>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- ê¸°ê¸° ì •ë³´ -->
                        <TextBlock Grid.Column="0" Text="{Binding DeviceInfoText}" 
                                   FontSize="12" Foreground="{StaticResource TextSecondaryBrush}"
                                   FontFamily="Segoe UI Variable, Segoe UI, sans-serif"
                                   VerticalAlignment="Center"/>

                        <!-- ì—°ê²° ìƒíƒœ ì¸ë””ì¼€ì´í„° -->
                        <Border Grid.Column="2" Background="#F5F5F7" CornerRadius="12" Padding="10,4" Margin="0,0,8,0">
                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <Ellipse Width="7" Height="7" Fill="{Binding StatusColor}" Margin="0,0,6,0"/>
                                <TextBlock Text="{Binding StatusText}" 
                                           FontSize="11" FontWeight="Medium"
                                           Foreground="{StaticResource TextSecondaryBrush}" VerticalAlignment="Center"
                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                            </StackPanel>
                        </Border>

                        <!-- í”„ë¡œí•„ ë²„íŠ¼ -->
                        <Button Grid.Column="3" Command="{Binding Profile.TogglePanelCommand}" Style="{StaticResource NavButtonStyle}" 
                                Height="32" Width="32" ToolTip="{DynamicResource Profile.Tooltip}">
                            <Grid>
                                <Ellipse Width="28" Height="28" Fill="{StaticResource AccentLightBrush}"/>
                                <TextBlock Text="U" FontSize="12" FontWeight="SemiBold" 
                                           Foreground="{StaticResource AccentBrush}"
                                           HorizontalAlignment="Center" VerticalAlignment="Center"
                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                            </Grid>
                        </Button>
                    </Grid>
                </Border>

                <!-- ===== ë¹„ë””ì˜¤ ì˜ì—­ ===== -->
                <Border Grid.Row="2" Background="#0A0A0A">
                    <Grid>
                        <Image x:Name="VideoImage" Source="{Binding VideoSource}" Stretch="Uniform" RenderOptions.BitmapScalingMode="HighQuality"
                               AllowDrop="True" DragEnter="OnDragEnter" DragLeave="OnDragLeave" Drop="OnDrop"/>

                        <!-- ì—°ê²° ì „ ì•ˆë‚´ (í”Œë ˆì´ìŠ¤í™€ë”) -->
                        <StackPanel x:Name="PlaceholderPanel" VerticalAlignment="Center" HorizontalAlignment="Center"
                                    Visibility="{Binding IsPlaceholderVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}">
                            <Border Background="#1A1A1E" CornerRadius="20" Width="72" Height="72" 
                                    HorizontalAlignment="Center" Margin="0,0,0,20">
                                <Path Data="M12,2 L12,6 M8,6 L16,6 L16,9 C16,10.1 15.1,11 14,11 L13,11 L13,14 C14.7,14 16,15.3 16,17 L16,20 C16,21.1 15.1,22 14,22 L10,22 C8.9,22 8,21.1 8,20 L8,17 C8,15.3 9.3,14 11,14 L11,11 L10,11 C8.9,11 8,10.1 8,9 L8,6"
                                      Stroke="#666666" StrokeThickness="1.5" 
                                      StrokeStartLineCap="Round" StrokeEndLineCap="Round" StrokeLineJoin="Round"
                                      Width="24" Height="24" Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                            </Border>
                            <TextBlock Text="{DynamicResource Placeholder.Title}" FontSize="16" FontWeight="SemiBold" 
                                       Foreground="#888888" HorizontalAlignment="Center"
                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                            <TextBlock Text="{DynamicResource Placeholder.Line1}" FontSize="12" 
                                       Foreground="#555555" HorizontalAlignment="Center" Margin="0,10,0,0"
                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                            <TextBlock Text="{DynamicResource Placeholder.Line2}" FontSize="12" 
                                       Foreground="#555555" HorizontalAlignment="Center" Margin="0,4,0,0"
                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                        </StackPanel>

                        <!-- APK ë“œë¡­ ì˜¤ë²„ë ˆì´ -->
                        <Border x:Name="DropOverlay" Background="#CC000000" 
                                Visibility="{Binding IsDropOverlayVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}" 
                                IsHitTestVisible="False">
                            <Border BorderBrush="{StaticResource AccentBrush}" BorderThickness="2" CornerRadius="16"
                                    Margin="28" VerticalAlignment="Center" HorizontalAlignment="Center" 
                                    Background="#22FFFFFF">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="20" ShadowDepth="0" Opacity="0.3" 
                                                      Color="{StaticResource AccentColor}"/>
                                </Border.Effect>
                                <StackPanel Margin="48,32">
                                    <TextBlock Text="ðŸ“¦" FontSize="32" HorizontalAlignment="Center" Margin="0,0,0,12"/>
                                    <TextBlock Text="{DynamicResource Drop.Title}" FontSize="18" Foreground="White" 
                                               HorizontalAlignment="Center" FontWeight="SemiBold"
                                               FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                    <TextBlock Text="{DynamicResource Drop.Subtitle}" FontSize="12" 
                                               Foreground="#AAAAAA" 
                                               HorizontalAlignment="Center" Margin="0,8,0,0"
                                               FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                </StackPanel>
                            </Border>
                        </Border>

                        <!-- ì„¤ì¹˜ ì§„í–‰ ì˜¤ë²„ë ˆì´ -->
                        <Border x:Name="InstallOverlay" Background="#CC000000" 
                                Visibility="{Binding IsInstallOverlayVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}" 
                                IsHitTestVisible="False">
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                <ProgressBar x:Name="InstallProgress" IsIndeterminate="True" 
                                             Width="240" Height="3" Foreground="{StaticResource AccentBrush}" 
                                             Background="#333333"/>
                                <TextBlock Text="{Binding InstallStatusText}" FontSize="13" 
                                           Foreground="White" FontWeight="Medium"
                                           HorizontalAlignment="Center" Margin="0,16,0,0"
                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                            </StackPanel>
                        </Border>

                        <!-- ë¡œê·¸ ì˜¤ë²„ë ˆì´ -->
                        <Border VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10" 
                                Background="#E6000000" CornerRadius="10" Padding="4"
                                Visibility="{Binding IsLogVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}">
                            <Border.Effect>
                                <DropShadowEffect BlurRadius="12" ShadowDepth="2" Opacity="0.3" Direction="270"/>
                            </Border.Effect>
                            <TextBox x:Name="LogTextBox" Text="{Binding LogText, Mode=OneWay}"
                                     Background="Transparent" Foreground="#CCCCCC" BorderThickness="0" 
                                     FontSize="10" FontFamily="Cascadia Code, Consolas, Courier New"
                                     IsReadOnly="True" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto"
                                     Height="160" Width="290" Padding="10,8"
                                     Visibility="{Binding IsLogVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}"/>
                        </Border>

                        <!-- ===== AI ë¦¬í¬íŠ¸ ëª¨ë“œ ì˜¤ë²„ë ˆì´ ===== -->
                        <Grid Visibility="{Binding Report.IsReportModeVisible}">
                            <!-- ìº¡ì²˜ëœ ìŠ¤í¬ë¦°ìƒ· (ì •ì  ì´ë¯¸ì§€) -->
                            <Image Source="{Binding Report.CapturedScreenshot}" Stretch="Uniform" 
                                   RenderOptions.BitmapScalingMode="HighQuality"/>

                            <!-- íˆ¬ëª… ì–´ë…¸í…Œì´ì…˜ ìº”ë²„ìŠ¤ -->
                            <rendering:ReportOverlayCanvas x:Name="ReportCanvas" Background="Transparent"
                                                       MouseLeftButtonDown="OnReportCanvasClick"/>

                            <!-- ìƒë‹¨ ìƒíƒœ ë©”ì‹œì§€ -->
                            <Border VerticalAlignment="Top" HorizontalAlignment="Center" 
                                    Background="#E61A1A1E" CornerRadius="0,0,10,10" Padding="16,8" Margin="0">
                                <TextBlock Text="{Binding Report.StatusMessage}" 
                                           FontSize="12" Foreground="#CCCCCC"
                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                            </Border>

                            <!-- ìš°ì¸¡ íŒ¨ë„: ì„ íƒëœ UI ìš”ì†Œ ì •ë³´ -->
                            <Border HorizontalAlignment="Right" Width="220" 
                                    Background="#F0FFFFFF" Margin="0"
                                    Visibility="{Binding Report.IsPanelVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="12" ShadowDepth="-2" Opacity="0.15" Direction="0"/>
                                </Border.Effect>
                                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="12,14">
                                    <StackPanel>
                                        <TextBlock Text="{DynamicResource Report.AnnoPanel}" FontSize="13" FontWeight="SemiBold"
                                                   Foreground="{StaticResource TextPrimaryBrush}" Margin="0,0,0,12"
                                                   FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>

                                        <TextBox Text="{Binding Report.SelectedElementInfo, Mode=OneWay}"
                                                 Background="Transparent" Foreground="{StaticResource TextPrimaryBrush}" 
                                                 BorderThickness="0" FontSize="11" 
                                                 FontFamily="Cascadia Code, Consolas, Courier New"
                                                 IsReadOnly="True" TextWrapping="Wrap" 
                                                 AcceptsReturn="True" MaxHeight="200"/>

                                        <Border Height="1" Background="{StaticResource BorderBrush}" Margin="0,12,0,12"/>

                                        <TextBlock Text="{DynamicResource Report.Memo.Label}" FontSize="11" FontWeight="Medium"
                                                   Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,6"
                                                   FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>

                                        <TextBox x:Name="ReportMemoBox" Style="{StaticResource InputFieldStyle}"
                                                 TextWrapping="Wrap" AcceptsReturn="True" Height="80"
                                                 FontSize="11" TextChanged="OnReportMemoChanged"/>
                                    </StackPanel>
                                </ScrollViewer>
                            </Border>

                            <!-- í•˜ë‹¨ ë¦¬í¬íŠ¸ ì œì–´ ë°” -->
                            <Border VerticalAlignment="Bottom" Background="#F0FFFFFF" 
                                    Padding="12,10" BorderBrush="{StaticResource BorderBrush}" 
                                    BorderThickness="0,1,0,0">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0" FontSize="11" 
                                               Foreground="{StaticResource TextSecondaryBrush}"
                                               VerticalAlignment="Center"
                                               FontFamily="Segoe UI Variable, Segoe UI, sans-serif">
                                        <Run Text="{DynamicResource Report.AnnotationCount}"/>
                                        <Run Text=": "/>
                                        <Run Text="{Binding Report.Annotations.Count, Mode=OneWay}" FontWeight="SemiBold"/>
                                    </TextBlock>

                                    <Button Grid.Column="1" Content="{DynamicResource Report.Mode.Exit}" 
                                            Command="{Binding Report.ExitReportModeCommand}" 
                                            Style="{StaticResource LinkButtonStyle}"
                                            Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,12,0"/>

                                    <Button Grid.Column="2" Content="{DynamicResource Report.Generate}" 
                                            Command="{Binding Report.GenerateReportCommand}" Foreground="White"
                                            Style="{StaticResource ConnectButtonStyle}" Padding="20,8"/>
                                </Grid>
                            </Border>
                        </Grid>

                        <!-- ===== í”„ë¡œí•„ íŒ¨ë„ ì˜¤ë²„ë ˆì´ ===== -->
                        <Border x:Name="ProfilePanel" Background="#CC000000" 
                                Visibility="{Binding Profile.IsPanelVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}">
                            <Border Background="White" CornerRadius="20" 
                                    Margin="24" Padding="32,28" VerticalAlignment="Center" HorizontalAlignment="Center"
                                    MinWidth="320">
                                <Border.Effect>
                                    <DropShadowEffect BlurRadius="30" ShadowDepth="8" Opacity="0.2" Direction="270"/>
                                </Border.Effect>
                                <StackPanel>
                                    <!-- í”„ë¡œí•„ ì•„ì´ì½˜ (ì´ë‹ˆì…œ) -->
                                    <Grid HorizontalAlignment="Center" Margin="0,0,0,18">
                                        <Ellipse Width="72" Height="72">
                                            <Ellipse.Fill>
                                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                                    <GradientStop Color="#5C6BC0" Offset="0"/>
                                                    <GradientStop Color="#3F51B5" Offset="1"/>
                                                </LinearGradientBrush>
                                            </Ellipse.Fill>
                                        </Ellipse>
                                        <TextBlock Text="T" FontSize="28" FontWeight="SemiBold" Foreground="White"
                                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                                   FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                    </Grid>

                                    <TextBlock Text="{Binding Profile.UserName}" FontSize="20" FontWeight="SemiBold"
                                               Foreground="{StaticResource TextPrimaryBrush}" HorizontalAlignment="Center"
                                               FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                    <TextBlock Text="{Binding Profile.Email}" FontSize="12"
                                               Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center"
                                               Margin="0,4,0,24"
                                               FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>

                                    <!-- êµ¬ë… ìƒíƒœ ì¹´ë“œ -->
                                    <Border Background="#FAFAFA" CornerRadius="14" Padding="18,16"
                                            Margin="0,0,0,10">
                                        <StackPanel>
                                            <TextBlock Text="{DynamicResource Profile.SubStatus}" FontSize="11" FontWeight="Medium"
                                                       Foreground="{StaticResource TextSecondaryBrush}"
                                                       Margin="0,0,0,8"
                                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                            <StackPanel Orientation="Horizontal">
                                                <Ellipse Width="8" Height="8" Fill="{Binding Profile.SubStatusColor}" 
                                                         Margin="0,0,8,0" VerticalAlignment="Center"/>
                                                <TextBlock Text="{Binding Profile.SubStatusText}" 
                                                           FontSize="15" FontWeight="SemiBold"
                                                           Foreground="{StaticResource TextPrimaryBrush}"
                                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>

                                    <!-- ì²´í—˜ ê¸°ê°„ ì¹´ë“œ -->
                                    <Border Background="#FAFAFA" CornerRadius="14" 
                                            Padding="18,16" Margin="0,0,0,10"
                                            Visibility="{Binding Profile.IsTrialCardVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}">
                                        <StackPanel>
                                            <TextBlock Text="{DynamicResource Profile.TrialPeriod}" FontSize="11" FontWeight="Medium"
                                                       Foreground="{StaticResource TextSecondaryBrush}"
                                                       Margin="0,0,0,8"
                                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="{Binding Profile.TrialDaysLeft}" FontSize="32" FontWeight="Bold"
                                                           Foreground="{StaticResource AccentBrush}"
                                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                                <TextBlock Text="{DynamicResource Profile.DaysLeft}" FontSize="14" 
                                                           Foreground="{StaticResource TextSecondaryBrush}"
                                                           VerticalAlignment="Bottom" Margin="8,0,0,5"
                                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                            </StackPanel>
                                            <Border Background="#E8E8ED" CornerRadius="4" Height="6" Margin="0,12,0,0">
                                                <Border Background="{StaticResource AccentBrush}" 
                                                        CornerRadius="4" Height="6" HorizontalAlignment="Left" 
                                                        Width="{Binding Profile.TrialProgress, Converter={x:Static local:ProgressToWidthConverter.Instance}}"/>
                                            </Border>
                                        </StackPanel>
                                    </Border>

                                    <!-- í”Œëžœ ì •ë³´ ì¹´ë“œ -->
                                    <Border Background="#FAFAFA" CornerRadius="14" Padding="18,16"
                                            Margin="0,0,0,24">
                                        <StackPanel>
                                            <TextBlock Text="{DynamicResource Profile.CurrentPlan}" FontSize="11" FontWeight="Medium"
                                                       Foreground="{StaticResource TextSecondaryBrush}"
                                                       Margin="0,0,0,8"
                                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                            <TextBlock Text="{Binding Profile.PlanName}" FontSize="15" FontWeight="SemiBold"
                                                       Foreground="{StaticResource TextPrimaryBrush}"
                                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                        </StackPanel>
                                    </Border>

                                    <!-- ì›”ê°„/ì—°ê°„ í”Œëžœ ì„ íƒ -->
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,16"
                                                Visibility="{Binding Profile.IsSubscribeVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}">
                                        <Border x:Name="MonthlyBtn" CornerRadius="8,0,0,8" BorderBrush="{StaticResource AccentBrush}" 
                                                BorderThickness="1.5" Padding="14,8" Cursor="Hand"
                                                Background="{StaticResource AccentBrush}">
                                            <Border.InputBindings>
                                                <MouseBinding Gesture="LeftClick" Command="{Binding Profile.SelectMonthlyCommand}"/>
                                            </Border.InputBindings>
                                            <StackPanel>
                                                <TextBlock Text="{DynamicResource Profile.Monthly}" FontSize="11" FontWeight="SemiBold" 
                                                           Foreground="White" HorizontalAlignment="Center"
                                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                                <TextBlock Text="{DynamicResource Profile.MonthlyPrice}" FontSize="10" 
                                                           Foreground="#C5CAE9" HorizontalAlignment="Center" Margin="0,2,0,0"
                                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                            </StackPanel>
                                        </Border>
                                        <Border x:Name="YearlyBtn" CornerRadius="0,8,8,0" BorderBrush="{StaticResource AccentBrush}" 
                                                BorderThickness="0,1.5,1.5,1.5" Padding="14,8" Cursor="Hand"
                                                Background="Transparent">
                                            <Border.InputBindings>
                                                <MouseBinding Gesture="LeftClick" Command="{Binding Profile.SelectYearlyCommand}"/>
                                            </Border.InputBindings>
                                            <StackPanel>
                                                <TextBlock Text="{DynamicResource Profile.Yearly}" FontSize="11" FontWeight="SemiBold" 
                                                           Foreground="{StaticResource AccentBrush}" HorizontalAlignment="Center"
                                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                                <TextBlock Text="{DynamicResource Profile.YearlyPrice}" FontSize="10" 
                                                           Foreground="{StaticResource TextSecondaryBrush}" HorizontalAlignment="Center" Margin="0,2,0,0"
                                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>

                                    <!-- êµ¬ë…í•˜ê¸° ë²„íŠ¼ -->
                                    <Button Content="{DynamicResource Profile.Subscribe}" 
                                            Command="{Binding Profile.SubscribeCommand}" Foreground="White" 
                                            Style="{StaticResource ConnectButtonStyle}" 
                                            Padding="0,12" Margin="0,0,0,12" HorizontalAlignment="Stretch"
                                            Visibility="{Binding Profile.IsSubscribeVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}"/>

                                    <!-- ë¡œê·¸ì•„ì›ƒ -->
                                    <Button Content="{DynamicResource Profile.Logout}" Click="OnLogout" 
                                            Style="{StaticResource LinkButtonStyle}"
                                            Foreground="{StaticResource DangerBrush}" Margin="0,4,0,0"/>
                                </StackPanel>
                            </Border>
                        </Border>
                    </Grid>
                </Border>

                <!-- ===== ì„¤ì • íŒ¨ë„ ì˜¤ë²„ë ˆì´ ===== -->
                <Border x:Name="SettingsPanel" Background="#CC000000" 
                        Visibility="{Binding Settings.IsPanelVisible, Converter={x:Static local:BoolToVisibilityConverter.Instance}}">
                    <Border Background="White" CornerRadius="20" 
                            Margin="24" Padding="28,24" VerticalAlignment="Center" HorizontalAlignment="Center"
                            MinWidth="320">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="30" ShadowDepth="8" Opacity="0.2" Direction="270"/>
                        </Border.Effect>
                        <StackPanel>
                            <!-- íƒ€ì´í‹€ -->
                            <TextBlock Text="{DynamicResource Settings.Title}" FontSize="20" FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimaryBrush}" Margin="0,0,0,24"
                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>

                            <!-- ìŠ¤íŠ¸ë¦¬ë° ì„¹ì…˜ -->
                            <TextBlock Text="{DynamicResource Settings.Streaming}" FontSize="12" FontWeight="Medium"
                                       Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,16"
                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>

                            <!-- ìµœëŒ€ í•´ìƒë„ -->
                            <Border Background="#FAFAFA" CornerRadius="12" Padding="16,12" Margin="0,0,0,10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{DynamicResource Settings.MaxResolution}" FontSize="13" FontWeight="Medium"
                                                   Foreground="{StaticResource TextPrimaryBrush}"
                                                   FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                        <TextBlock Text="{Binding Settings.ResolutionText}" FontSize="11"
                                                   Foreground="{StaticResource TextSecondaryBrush}" Margin="0,2,0,0"
                                                   FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                        <TextBox Text="{Binding Settings.MaxWidth, UpdateSourceTrigger=PropertyChanged}" 
                                                 Width="50" Style="{StaticResource InputFieldStyle}" 
                                                 FontSize="11" Padding="4,4" HorizontalContentAlignment="Center"/>
                                        <TextBlock Text="Ã—" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}" 
                                                   VerticalAlignment="Center" Margin="6,0"/>
                                        <TextBox Text="{Binding Settings.MaxHeight, UpdateSourceTrigger=PropertyChanged}" 
                                                 Width="50" Style="{StaticResource InputFieldStyle}" 
                                                 FontSize="11" Padding="4,4" HorizontalContentAlignment="Center"/>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- ë¹„íŠ¸ë ˆì´íŠ¸ -->
                            <Border Background="#FAFAFA" CornerRadius="12" Padding="16,12" Margin="0,0,0,10">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{DynamicResource Settings.Bitrate}" FontSize="13" FontWeight="Medium"
                                                   Foreground="{StaticResource TextPrimaryBrush}"
                                                   FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                        <TextBlock FontSize="11" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,2,0,0"
                                                   FontFamily="Segoe UI Variable, Segoe UI, sans-serif">
                                            <TextBlock.Text>
                                                <Binding Path="Settings.BitrateMbps" StringFormat="{}{0:F1} Mbps"/>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </StackPanel>
                                    <Slider Grid.Column="1" Width="120" VerticalAlignment="Center"
                                            Minimum="1" Maximum="30" TickFrequency="1"
                                            Value="{Binding Settings.BitrateMbps}"
                                            Foreground="{StaticResource AccentBrush}"/>
                                </Grid>
                            </Border>

                            <!-- í”„ë ˆìž„ë ˆì´íŠ¸ -->
                            <Border Background="#FAFAFA" CornerRadius="12" Padding="16,12" Margin="0,0,0,24">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{DynamicResource Settings.Framerate}" FontSize="13" FontWeight="Medium"
                                                   Foreground="{StaticResource TextPrimaryBrush}"
                                                   FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                        <TextBlock FontSize="11" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,2,0,0"
                                                   FontFamily="Segoe UI Variable, Segoe UI, sans-serif">
                                            <TextBlock.Text>
                                                <Binding Path="Settings.Framerate" StringFormat="{}{0} fps"/>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </StackPanel>
                                    <Slider Grid.Column="1" Width="120" VerticalAlignment="Center"
                                            Minimum="15" Maximum="120" TickFrequency="5"
                                            Value="{Binding Settings.Framerate}"
                                            Foreground="{StaticResource AccentBrush}"/>
                                </Grid>
                            </Border>

                            <!-- ë²„íŠ¼ -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <Button Content="{DynamicResource Settings.Close}" 
                                        Command="{Binding Settings.CloseCommand}" 
                                        Style="{StaticResource LinkButtonStyle}"
                                        Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,12,0"/>
                                <Button Content="{DynamicResource Settings.Save}" 
                                        Command="{Binding Settings.SaveCommand}" Foreground="White"
                                        Style="{StaticResource ConnectButtonStyle}" 
                                        Padding="20,10"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Border>

                <!-- ===== ë„¤ë¹„ê²Œì´ì…˜ ë°” ===== -->
                <Border Grid.Row="3" Background="White" 
                        BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,1,0,0" Padding="0,2">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="0" Command="{Binding NavBackCommand}" Style="{StaticResource NavButtonStyle}">
                            <Path Data="M14,4 L6,12 L14,20" Stroke="#86868B" StrokeThickness="2" 
                                  StrokeStartLineCap="Round" StrokeEndLineCap="Round" StrokeLineJoin="Round"
                                  Width="20" Height="24" Stretch="Uniform"/>
                        </Button>
                        <Button Grid.Column="1" Command="{Binding NavHomeCommand}" Style="{StaticResource NavButtonStyle}">
                            <Ellipse Width="18" Height="18" Stroke="#86868B" StrokeThickness="2" Fill="Transparent"/>
                        </Button>
                        <Button Grid.Column="2" Command="{Binding NavRecentCommand}" Style="{StaticResource NavButtonStyle}">
                            <Rectangle Width="15" Height="15" Stroke="#86868B" StrokeThickness="2" 
                                       RadiusX="3" RadiusY="3" Fill="Transparent"/>
                        </Button>
                    </Grid>
                </Border>

                <!-- ===== í•˜ë‹¨ íˆ´ë°” ===== -->
                <Border Grid.Row="4" Background="White" 
                        BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,1,0,0" Padding="8,10">
                    <DockPanel LastChildFill="False">
                        <Button DockPanel.Dock="Left" Command="{Binding CaptureScreenCommand}" Content="{DynamicResource Tool.Capture}" 
                                Style="{StaticResource ToolButtonStyle}" Margin="0,0,4,0"/>
                        <Button DockPanel.Dock="Left" Command="{Binding CopyReportCommand}" Content="{DynamicResource Tool.Report}" 
                                Style="{StaticResource ToolButtonStyle}" Margin="0,0,4,0"/>
                        <Button DockPanel.Dock="Left" Command="{Binding Settings.TogglePanelCommand}" 
                                Content="âš™" ToolTip="{DynamicResource Settings.Tooltip}"
                                Style="{StaticResource ToolButtonStyle}" Margin="0,0,4,0"/>
                        <Button DockPanel.Dock="Right" Command="{Binding ToggleLogCommand}" Content="{DynamicResource Tool.Log}" 
                                Style="{StaticResource ToolButtonStyle}" Margin="4,0,0,0"/>
                        <Button Content="{Binding ConnectButtonText}" 
                                Command="{Binding ConnectToggleCommand}" Foreground="White"
                                IsEnabled="{Binding CanConnect}"
                                Style="{StaticResource ConnectButtonStyle}" 
                                HorizontalAlignment="Center" Margin="4,0"/>
                    </DockPanel>
                </Border>
            </Grid>

            <!-- ===== ë¡œê·¸ì¸ í™”ë©´ ===== -->
            <Grid x:Name="LoginPanel" Visibility="Visible">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="3*"/>
                </Grid.ColumnDefinitions>

                <!-- ì¢Œì¸¡: Indigo ê·¸ë¼ë°ì´ì…˜ ë°°ë„ˆ -->
                <Border Grid.Column="0">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#303F9F" Offset="0"/>
                            <GradientStop Color="#5C6BC0" Offset="0.5"/>
                            <GradientStop Color="#7986CB" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.Background>
                    <Grid>
                        <!-- ì¢Œì¸¡ ìƒë‹¨ ì–¸ì–´ ì „í™˜ ë²„íŠ¼ -->
                        <Button Content="{DynamicResource Lang.Switch}" 
                                Command="{Binding ToggleLanguageCommand}" Style="{StaticResource LangButtonStyle}"
                                HorizontalAlignment="Left" VerticalAlignment="Top" Margin="12,10,0,0"/>

                        <StackPanel VerticalAlignment="Center" Margin="16,0">
                            <Ellipse Width="12" Height="12" Fill="White" Opacity="0.8" HorizontalAlignment="Left"
                                     Margin="0,0,0,16"/>
                            <TextBlock Text="{DynamicResource App.Name}" FontSize="24" FontWeight="Bold" Foreground="White"
                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                            <TextBlock Text="{DynamicResource Login.Banner.Tagline}" FontSize="12" Foreground="#C5CAE9" 
                                       Margin="0,8,0,0" LineHeight="18"
                                       FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                            <Border Background="#22FFFFFF" CornerRadius="8" Padding="10,8" Margin="0,24,0,0">
                                <TextBlock Text="{DynamicResource Login.Banner.Feature}" FontSize="11" 
                                           Foreground="#E8EAF6" LineHeight="16" TextWrapping="Wrap"
                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- ìš°ì¸¡: ë¡œê·¸ì¸ í¼ -->
                <Border Grid.Column="1" Background="White">
                    <Grid>
                        <!-- íƒ€ì´í‹€ë°” ì˜ì—­ (ìœˆë„ìš° ì»¨íŠ¸ë¡¤) -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top" Panel.ZIndex="1">
                            <Button Content="â”€" Style="{StaticResource CaptionButtonStyle}" Click="OnMinimize"/>
                            <Button Content="â–¡" Style="{StaticResource CaptionButtonStyle}" Click="OnMaximize"/>
                            <Button Content="âœ•" Style="{StaticResource CloseButtonStyle}" Click="OnClose"/>
                        </StackPanel>

                        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled"
                                      Padding="0,40,0,0">
                            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" 
                                        Width="260" Margin="0,20,0,20">
                                <TextBlock Text="{DynamicResource Login.Title}" FontSize="24" FontWeight="Bold" 
                                           Foreground="{StaticResource TextPrimaryBrush}"
                                           Margin="0,0,0,6"
                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                <TextBlock Text="{DynamicResource Login.Subtitle}" FontSize="12" 
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           Margin="0,0,0,32"
                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>

                                <TextBlock Text="{DynamicResource Login.Id}" FontSize="12" FontWeight="Medium"
                                           Foreground="{StaticResource TextSecondaryBrush}" 
                                           Margin="2,0,0,6"
                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                <TextBox x:Name="LoginIdBox" Style="{StaticResource InputFieldStyle}" 
                                         Margin="0,0,0,16"/>

                                <TextBlock Text="{DynamicResource Login.Password}" FontSize="12" FontWeight="Medium"
                                           Foreground="{StaticResource TextSecondaryBrush}" 
                                           Margin="2,0,0,6"
                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                <PasswordBox x:Name="LoginPwBox" Style="{StaticResource PasswordFieldStyle}" 
                                             Margin="0,0,0,4"/>

                                <TextBlock HorizontalAlignment="Right" Margin="0,0,2,12">
                                    <Hyperlink Command="{Binding Login.ForgotPasswordCommand}"
                                               Foreground="{StaticResource TextSecondaryBrush}" FontSize="11"
                                               TextDecorations="None">
                                        <Run Text="{DynamicResource Login.ForgotPassword}"/>
                                    </Hyperlink>
                                </TextBlock>

                                <TextBlock Text="{Binding Login.ErrorText}" FontSize="11" Foreground="{StaticResource DangerBrush}"
                                           HorizontalAlignment="Center" Margin="0,0,0,16"
                                           FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>

                                <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ (íšŒì›ê°€ìž… ëª¨ë“œ) -->
                                <StackPanel Visibility="{Binding Login.IsSignupMode, Converter={x:Static local:BoolToVisibilityConverter.Instance}}">
                                    <TextBlock Text="{DynamicResource Login.ConfirmPassword}" FontSize="12" FontWeight="Medium"
                                               Foreground="{StaticResource TextSecondaryBrush}" 
                                               Margin="2,0,0,6"
                                               FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                    <PasswordBox x:Name="SignupConfirmPwBox" Style="{StaticResource PasswordFieldStyle}" 
                                                 Margin="0,0,0,16"/>
                                </StackPanel>

                                <Button Content="{DynamicResource Login.Button}" Click="OnLogin" Foreground="White"
                                        Style="{StaticResource ConnectButtonStyle}" 
                                        Padding="0,14" HorizontalAlignment="Stretch" Margin="0,0,0,20"
                                        Visibility="{Binding Login.IsSignupMode, Converter={x:Static local:BoolToVisibilityConverter.InverseInstance}}"/>

                                <Button Content="{DynamicResource Login.SignupButton}" Click="OnSignup" Foreground="White"
                                        Style="{StaticResource ConnectButtonStyle}" 
                                        Padding="0,14" HorizontalAlignment="Stretch" Margin="0,0,0,20"
                                        Visibility="{Binding Login.IsSignupMode, Converter={x:Static local:BoolToVisibilityConverter.Instance}}"/>

                                <!-- êµ¬ë¶„ì„  -->
                                <Grid Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Border Grid.Column="0" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1" 
                                            VerticalAlignment="Center" Margin="0,0,12,0"/>
                                    <TextBlock Grid.Column="1" Text="{DynamicResource Login.Or}" FontSize="11" 
                                               Foreground="{StaticResource TextSecondaryBrush}"
                                               FontFamily="Segoe UI Variable, Segoe UI, sans-serif"/>
                                    <Border Grid.Column="2" BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1" 
                                            VerticalAlignment="Center" Margin="12,0,0,0"/>
                                </Grid>

                                <Button Content="{DynamicResource Login.Signup}" 
                                        Command="{Binding Login.SignupCommand}" Style="{StaticResource LinkButtonStyle}"
                                        Visibility="{Binding Login.IsSignupMode, Converter={x:Static local:BoolToVisibilityConverter.InverseInstance}}"/>
                                <Button Content="{DynamicResource Login.BackToLogin}" 
                                        Command="{Binding Login.SignupCommand}" Style="{StaticResource LinkButtonStyle}"
                                        Visibility="{Binding Login.IsSignupMode, Converter={x:Static local:BoolToVisibilityConverter.Instance}}"/>
                            </StackPanel>
                        </ScrollViewer>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
